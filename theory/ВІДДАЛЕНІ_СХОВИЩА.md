# Віддалені сховища

Деякі основні операції, пов'язані з роботою з віддаленими сховищами, наведені нижче:

## Клонування
Створює початкову копію віддаленого репозиторію та розміщує
її у власну базу даних об'єктів. Основною командою є `git clone`.
## Витягування (pull)
Переносить зміни з віддаленого репозиторію до локального,
підтримуючи вашу гілку відстеження в актуальному стані.
Основні команди: `git pull` та `git fetch`. 
## Внесення змін (push)
Надсилайте ваші зміни до віддаленого репозиторію.
Основна команда - `git push`. 
## Публікація
Робить ваш репозиторій доступним для інших, щоб його можна було клонувати,
витягувати з нього і, можливо, надсилати зміни до нього.

Існує особливий тип репозиторію, який називається «голий» (__bare__) репозиторій.
Зазвичай ви працюєте в репозиторії для розробки. Голий репозиторій не має
робочих каталогів, не використовується для розробки і не має перевірених гілок.
Він використовується лише як авторитетне місце для клонування, витягування та
внесення змін. Він створюється за допомогою опції `--bare` до команди `clone`.

# Клонування

Отримати початковий клон віддаленого репозиторію дуже просто:
```bash
git clone git://git.kernel.org/pub/scm/git/git.git
```
яка відключає весь репозиторій Git для самого Git'а, поміщає його в каталог з назвою git,
який містить звичайний підкаталог.git з усіма об'єктами, індексами тощо, які є частиною репозиторію.

Це може бути великим обсягом даних для завантаження, але це одноразова операція.

Зверніть увагу на використання протоколу `git://`  у віддаленій специфікації.
Це найкращий метод, але не єдиний, який можна використовувати. Існують і інші можливості:
```bash
file:///path/to/repo.git
ssh://user@remotesite.org[:port]/path/to/repo.git
user@remotesite.org:/path/to/repo.git
ht‌tp://remotesite.org/path/to/repo.git
ht‌tps://remotesite.org/path/to/repo.git
rsync://remotesite.org/path/to/repo.git
```
Метод `git://` є найшвидшим і найчистішим, і його слід використовувати, якщо він підтримується.

Якщо ви робите клон локального репозиторію, Git використовуватиме жорсткі посилання,
де це можливо, щоб заощадити місце на диску. Якщо ви хочете цьому запобігти,
використовуйте параметр `--no-hardlinks` у `git clone`.

Ви можете бачити посилання як у локальному, так і у віддаленому репозиторії.

Наприклад, в локальному каталозі Git-проєкту зробіть:
```bash
git show-ref
```

Команда `git show-ref` використовується для відображення посилань на коміти,
гілки, теги та інші посилання у вашому репозиторії. Вона показує SHA-1 хеш-коди та назви посилань.
Коли ви виконуєте команду `git show-ref`, вона виводить список посилань
та відповідних хеш-кодів комітів, розділених пробілом. Кожен рядок містить
дві частини: перша частина відображає хеш-код коміту, а друга частина представляє
назву посилання або його вказівник.

Наприклад, ось приклад виводу команди git show-ref:
```bash
3f37d7b9879d7a2a74b67ff2d29a3786c950ecfb refs/heads/master
3f37d7b9879d7a2a74b67ff2d29a3786c950ecfb refs/remotes/origin/master
ee2f6b8ef998f28156c972a0a654e5f6db9c24d5 refs/tags/v1.0
```
У цьому прикладі, перші два рядки показують посилання гілки __master__
з однаковим хеш-кодом 3f37d7b9879d7a2a74b67ff2d29a3786c950ecfb,
а третій рядок відображає посилання на тег __v1.0__ з хеш-кодом ee2f6b8ef998f28156c972a0a654e5f6db9c24d5.

Команда `git show-ref` корисна для перевірки наявності гілок,
тегів та інших посилань у вашому репозиторії та отримання їхніх
хеш-кодів для подальшої використання у командах Git.


Щоб побачити, що знаходиться у віддаленому репозиторії, виконайте:
```bash
git ls-remote git://git.kernel.org/pub/scm/git/git.git
```

Ви помітите, що у віддаленому репозиторії є додаткові посилання, які не відображені в клоні.

Якщо ви хочете оновити свій репозиторій зі змінами, зробленими на віддаленому сайті,
ви можете просто зробити це за допомогою:
```bash
git pull
```
для синхронізації.

# Публікація вашого проєкту

Припустімо, що ви хочете зробити ваш проєкт доступним для інших як на вашому локальному комп'ютері,
так і у мережі, для клонування, внесення змін, завантаження змін тощо.

По-перше, вам слід створити «голу» версію вашого проєкту, наприклад:
```bash
git clone --bare git-test /tmp/git-test
```
де ви побачите, що `/tmp/git-test` тепер містить копію репозиторія вашого проєкту,
але не містить самих робочих файлів.

Локальний користувач може легко створити нову клоновану копію тією ж командою без опції `--bare`,
що і у випадку з:
```bash
git clone /tmp/git-test my-git
```

Але як бути з мережевими користувачами?

Щоб зробити копію доступною за допомогою власного протоколу Git'а,
вам потрібно встановити службу процесу-демона Git'а.
Щоб зробити доступним ваш «голий» репозиторій, вам потрібно
створити порожній файл у його головному каталозі:
```bash
touch /tmp/git-test/git-daemon-export-ok
```

Ви можете налаштувати автоматичний запуск процесу-демона Git'а,
налаштувавши xinetd або inetd у вашій системі, і таким чином ви
зможете досить точно контролювати його поведінку. Однак, для спрощення,
ви можете просто запустити процес-демон у фоновому режимі: 
```bash
git daemon &
```
Вам не обов'язково запускати його від імені суперкористувача.

Тоді віддалений користувач може просто клонувати ваш репозиторій за допомогою:
```bash
git clone 192.168.1.100:/tmp/git-test my-git
```

Це дає йому можливість лише клонувати та отримувати,
але не вносити зміни. Ви можете дати кожному можливість відкочувати зміни:
```bash
git daemon --enable=receive-pack
```

але це слід робити лише в дуже дружньому середовищі.

Крім того, це буде зроблено для всіх Git-репозиторіїв у системі.
Щоб увімкнути доступ на запис лише для одного репозиторію,
вам слід додати до конфігураційного файлу цього репозиторію такі рядки: 
```
[daemon]
receivepack = true
```

Щоб увімкнути доступ через протокол http, вам потрібно мати встановлений
і працюючий вебсервер (можливо, apache) і трохи знати, як його налаштувати.
Ви можете розмістити каталог вашого проєкту або в `/var/www/html`, або в непривілейованому
місці `/home/username/public_html` (в цьому випадку ваш сервер має бути налаштований на такий доступ).

Перш ніж доступ буде надано, ви повинні перейти до каталогу проєкту і виконати команду:
```bash
git --bare update-server-info
```

Після цього доступ через вебсервер можна здійснювати за допомогою цих команд: 
```bash
git clone https://192.168.1.100/git-test my-git
git clone https://192.168.1.100/~username/git-test
```

де вам потрібно вказати правильну IP-адресу або домен, а також правильне ім'я користувача.

Припустимо, ви хочете зробити свій проєкт доступним для когось, хто не користується Git'ом,
або ви хочете зберігати заархівовані матеріали вашого поточного робочого дерева без включення
інформаційних каталогів репозиторію  .git.

Це легко зробити за допомогою `git archive`:
```bash
git archive --verbose HEAD | bzip2 > myproject.tar.bz2
```

Якщо ви хочете створити архів, що відповідає певному моменту,
а не останньому стану, скажімо, позначений v1.7.1, ви можете це зробити:
```bash
git archive --verbose v1.7.1 | bzip2 > myproject_v1.7.1.tar.bz2
```